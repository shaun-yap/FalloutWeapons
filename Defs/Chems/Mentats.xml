<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="MakeableDrugPillBase">
    <defName>FCP_Mentats</defName>
    <label>Mentats</label>
    <description>Taking Mentats provides a boost to mental capacity, it is slightly addictive.</description>
    <descriptionHyperlinks>
      <HediffDef>MentatsHigh</HediffDef>
      <HediffDef>MentatsTolerance</HediffDef>
      <HediffDef>MentatsAddiction</HediffDef>
      <HediffDef>ChemicalDamageModerate</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Drug/Mentats</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>400</WorkToMake>
      <MarketValue>40</MarketValue>
      <Mass>0.05</Mass>
      <DeteriorationRate>6</DeteriorationRate>
      <Flammability>1.3</Flammability>
    </statBases>
    <techLevel>Industrial</techLevel>
    <ingestible>
      <foodType>Processed</foodType>
      <baseIngestTicks>120</baseIngestTicks>
      <nurseable>true</nurseable>
      <drugCategory>Hard</drugCategory>
      <ingestEffectEat>EatVegetarian</ingestEffectEat>
      <ingestHoldOffsetStanding>
        <northDefault>
          <offset>(0.27,0,0.08)</offset>
          <behind>true</behind>
        </northDefault>
        <east>
          <offset>(0.45,0,0.08)</offset>
        </east>
        <south>
          <offset>(0.27,0,0.08)</offset>
        </south>
        <west>
          <offset>(-0.50,0,0.08)</offset>
          <flip>true</flip>
        </west>
      </ingestHoldOffsetStanding>
      <ingestHoldUsesTable>false</ingestHoldUsesTable>
      <ingestCommandString>Eat {0}</ingestCommandString>
      <ingestReportString>Eating {0}.</ingestReportString>
      <ingestReportStringEat>Consuming {0}.</ingestReportStringEat>
      <useEatingSpeedStat>false</useEatingSpeedStat>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_OffsetNeed">
          <need>Rest</need>
          <offset>0.25</offset>
          <toleranceChemical>Mentats</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>MentatsHigh</hediffDef>
          <severity>0.5</severity>
          <toleranceChemical>Mentats</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>MentatsTolerance</hediffDef>
          <severity>0.02</severity>
          <divideByBodySize>true</divideByBodySize>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <researchPrerequisite>FCP_ChemsHard</researchPrerequisite>
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
      <workSpeedStat>DrugCookingSpeed</workSpeedStat>
      <workSkill>Cooking</workSkill>
    </recipeMaker>
    <costList>
      <Neutroamine>2</Neutroamine>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>Mentats</chemical>
        <addictiveness>0.05</addictiveness>
        <minToleranceToAddict>0.1</minToleranceToAddict>
        <existingAddictionSeverityOffset>0.30</existingAddictionSeverityOffset>
        <needLevelOffset>1</needLevelOffset>
        <overdoseSeverityOffset>0.09~0.18</overdoseSeverityOffset>
        <largeOverdoseChance>0.005</largeOverdoseChance>
        <listOrder>20</listOrder>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>MentatsHigh</defName>
    <label>High on Mentats</label>
    <labelNoun>Mentats high</labelNoun>
    <description>Coosts cognitive skills of a user</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1.0</severityPerDay>
      </li>
    </comps>
      <stages>
            <li>
          <capMods>
            <li>
              <capacity>Consciousness</capacity>
              <offset>0.2</offset>
            </li>
          </capMods>
	  <statOffsets>
		  <ResearchSpeed>0.50</ResearchSpeed>
	      <GlobalLearningFactor>0.2</GlobalLearningFactor>
	  </statOffsets>
        </li>
      </stages>
  </HediffDef>

<ThoughtDef>
<defName>PCF_MentatsHigh</defName>
<workerClass>ThoughtWorker_Hediff</workerClass>
<hediff>MentatsHigh</hediff>
<stages>
<li>
<label>Aided by Mentats</label>
<description>I feel like everything makes more sense, I should get to work.</description>
<baseMoodEffect>5</baseMoodEffect>
</li>
</stages>
</ThoughtDef>

  <!-- Mentats addiction -->

  <ChemicalDef>
    <defName>Mentats</defName>
    <label>Mentats</label>
    <addictionHediff>MentatsAddiction</addictionHediff>
    <toleranceHediff>MentatsTolerance</toleranceHediff>
    <onGeneratedAddictedToleranceChance>0.8</onGeneratedAddictedToleranceChance>
  </ChemicalDef>

  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_Mentats</defName>
    <needClass>Need_Chemical</needClass>
    <label>Mentats</label>
    <description>Because of a Mentats dependence, this person needs to regularly consume Mentats to avoid withdrawal symptoms.</description>
    <listPriority>25</listPriority>
  </NeedDef>
  
  <HediffDef ParentName="DrugToleranceBase">
    <defName>MentatsTolerance</defName>
    <label>Mentats tolerance</label>
    <description>A built-up tolerance to Mentats. The more severe this tolerance is, the more Mentats it takes to get the same effect.</description>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.333</severityPerDay>
      </li>
      <li Class="HediffCompProperties_DrugEffectFactor">
        <chemical>Mentats</chemical>
      </li>
    </comps>
    <hediffGivers>
      <li Class="HediffGiver_RandomDrugEffect">
        <hediff>ChemicalDamageModerate</hediff>
        <baseMtbDays>90</baseMtbDays>
        <minSeverity>0.50</minSeverity>
        <partsToAffect>
          <li>Brain</li>
        </partsToAffect>
        <countToAffect>1</countToAffect>
      </li>
    </hediffGivers>
  </HediffDef>

  <HediffDef ParentName="AddictionBase">
    <defName>MentatsAddiction</defName>
    <label>Mentats dependence</label>
    <description>A chemical addiction to Mentats. Long-term use of Mentats has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
\nWithout regular doses of Mentats, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <causesNeed>Chemical_Mentats</causesNeed>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.15</severityPerDay>
      </li>
    </comps>
    <stages>
      <li>
      </li>
      <li>
        <label>withdrawal</label>
	  <statOffsets>
	      <GlobalLearningFactor>-1.0</GlobalLearningFactor>
	  </statOffsets>
        <mentalStateGivers>
          <li>
            <mentalState>Binging_DrugMajor</mentalState>
            <mtbDays>60</mtbDays>
          </li>
        </mentalStateGivers>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>MentatsWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>MentatsAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>Mentats withdrawal</label>
        <description>I don't feel like a genius anymore.</description>
        <baseMoodEffect>-15</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

</Defs>