<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="MakeableDrugPillBase">
    <defName>FCP_Buffout</defName>
    <label>Buffout</label>
    <description>An advanced pre-war sterioid, that aides in physical tasks, it is fairly addictive and can be easily overdosed.</description>
    <descriptionHyperlinks>
      <HediffDef>BuffoutHigh</HediffDef>
      <HediffDef>BuffoutTolerance</HediffDef>
      <HediffDef>BuffoutAddiction</HediffDef>
      <HediffDef>HeartAttack</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Drug/Buffout</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>300</WorkToMake>
      <MarketValue>35</MarketValue>
      <Mass>0.005</Mass>
    </statBases>
    <techLevel>Industrial</techLevel>
    <ingestible>
      <drugCategory>Hard</drugCategory>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>BuffoutHigh</hediffDef>
          <severity>0.75</severity>
          <toleranceChemical>Buffout</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>BuffoutTolerance</hediffDef>
          <severity>0.03</severity>
          <divideByBodySize>true</divideByBodySize>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <researchPrerequisite>FCP_ChemsHard</researchPrerequisite>
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
    </recipeMaker>
    <costList>
      <Neutroamine>2</Neutroamine>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>Buffout</chemical>
        <addictiveness>0.10</addictiveness>
        <minToleranceToAddict>0.08</minToleranceToAddict>
        <existingAddictionSeverityOffset>0.20</existingAddictionSeverityOffset>
        <needLevelOffset>1</needLevelOffset>
        <listOrder>210</listOrder>
        <overdoseSeverityOffset>0.3~0.5</overdoseSeverityOffset>
        <largeOverdoseChance>0.1</largeOverdoseChance>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>BuffoutHigh</defName>
    <label>buffed by Buffout</label>
    <labelNoun>Buffout buff</labelNoun>
    <description>Buffout in the bloodstream makes muscles big.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1.5</severityPerDay>
      </li>
    </comps>
      <stages>
        <li>
          <painFactor>0.75</painFactor>
          <restFallFactor>0.8</restFallFactor>
          <capMods>
            <li>
              <capacity>Manipulation</capacity>
              <offset>0.2</offset>
            </li>
            <li>
              <capacity>Moving</capacity>
              <offset>0.2</offset>
            </li>
          </capMods>
          <hediffGivers>
            <li Class="HediffGiver_Random">
              <hediff>HeartAttack</hediff>
              <mtbDays>180</mtbDays>
              <partsToAffect>
                <li>Heart</li>
              </partsToAffect>
            </li>
          </hediffGivers>
        </li>
      </stages>
  </HediffDef>
  
  <!-- Buffout addiction -->
  
  <ChemicalDef>
    <defName>Buffout</defName>
    <label>Buffout</label>
    <addictionHediff>BuffoutAddiction</addictionHediff>
    <toleranceHediff>BuffoutTolerance</toleranceHediff>
    <onGeneratedAddictedToleranceChance>0.8</onGeneratedAddictedToleranceChance>
  </ChemicalDef>
  
  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_Buffout</defName>
    <needClass>Need_Chemical</needClass>
    <label>Buffout</label>
    <description>Because of an Buffout addiction, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
    <listPriority>40</listPriority>
  </NeedDef>

  <HediffDef ParentName="DrugToleranceBase">
    <defName>BuffoutTolerance</defName>
    <label>Buffout tolerance</label>
    <description>A built-up tolerance to Buffout. The more severe this tolerance is, the more Buffout it takes to get the same effect.</description>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.015</severityPerDay>
      </li>
      <li Class="HediffCompProperties_DrugEffectFactor">
        <chemical>Buffout</chemical>
      </li>
    </comps>
  </HediffDef>
  
  <HediffDef ParentName="AddictionBase">
    <defName>BuffoutAddiction</defName>
    <label>Buffout addiction</label>
    <description>A chemical addiction to Buffout. Long-term presence of Buffout has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
\nWithout regular doses of Buffout, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <causesNeed>Chemical_Buffout</causesNeed>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.0333</severityPerDay>
      </li>
    </comps>
    <stages>
      <li>
      </li>
      <li>
        <label>withdrawal</label>
        <restFallFactorOffset>0.5</restFallFactorOffset>
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <offset>-0.3</offset>
          </li>
        </capMods>
        <mentalStateGivers>
          <li>
            <mentalState>Binging_DrugExtreme</mentalState>
            <mtbDays>90</mtbDays>
          </li>
          <li>
            <mentalState>Wander_Psychotic</mentalState>
            <mtbDays>10</mtbDays>
          </li>
        </mentalStateGivers>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>BuffoutWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>BuffoutAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>Buffout withdrawal</label>
        <description>Why my pee-pee not working?</description>
        <baseMoodEffect>-15</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>
  
</Defs>
