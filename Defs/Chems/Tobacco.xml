<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="MakeableDrugBase">
    <defName>FCP_cigarette</defName>
    <label>cigarette</label>
    <description>Packs of Big Boss brand cigarettes are abundant in both Glitterworlds and Rimworlds. They may lead to problems with breathing, but smoking is also quite relaxing.</description>
    <descriptionHyperlinks>
      <HediffDef>CigaretteHigh</HediffDef>
      <HediffDef>TobaccoTolerance</HediffDef>
      <HediffDef>TobaccoAddiction</HediffDef>
      <HediffDef>Carcinoma</HediffDef>
      <HediffDef>Asthma</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Drug/cheems</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>150</WorkToMake>
      <MarketValue>5</MarketValue>
      <Mass>0.05</Mass>
      <DeteriorationRate>6</DeteriorationRate>
      <Flammability>1.3</Flammability>
    </statBases>
    <techLevel>Industrial</techLevel>
    <ingestible>
      <foodType>Plant, Processed</foodType>
      <joyKind>Chemical</joyKind>
      <joy>0.3</joy>
      <baseIngestTicks>360</baseIngestTicks>
      <nurseable>true</nurseable>
      <drugCategory>Social</drugCategory>
      <ingestSound>Ingest_Smoke</ingestSound>
      <ingestEffect>Smoke_Joint</ingestEffect>
      <ingestEffectEat>EatVegetarian</ingestEffectEat>
      <ingestHoldOffsetStanding>
        <northDefault>
          <offset>(0.27,0,0.08)</offset>
          <behind>true</behind>
        </northDefault>
        <east>
          <offset>(0.45,0,0.08)</offset>
        </east>
        <south>
          <offset>(0.27,0,0.08)</offset>
        </south>
        <west>
          <offset>(-0.50,0,0.08)</offset>
          <flip>true</flip>
        </west>
      </ingestHoldOffsetStanding>
      <ingestHoldUsesTable>false</ingestHoldUsesTable>
      <ingestCommandString>Smoke {0}</ingestCommandString>
      <ingestReportString>Smoking {0}.</ingestReportString>
      <ingestReportStringEat>Consuming {0}.</ingestReportStringEat>
      <useEatingSpeedStat>false</useEatingSpeedStat>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>CigaretteHigh</hediffDef>
          <severity>0.5</severity>
          <toleranceChemical>Tobacco</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>TobaccoTolerance</hediffDef>
          <severity>0.015</severity>
          <divideByBodySize>false</divideByBodySize>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
	<researchPrerequisite>FCP_Tobacco</researchPrerequisite>
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
      <workSpeedStat>DrugCookingSpeed</workSpeedStat>
      <workSkill>Cooking</workSkill>
    </recipeMaker>
    <costList>
      <FCP_CoyoteChew>2</FCP_CoyoteChew>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>Tobacco</chemical>
        <addictiveness>0.020</addictiveness>
        <minToleranceToAddict>0.15</minToleranceToAddict>
        <existingAddictionSeverityOffset>0.06</existingAddictionSeverityOffset>
        <needLevelOffset>1</needLevelOffset>
        <listOrder>20</listOrder>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>CigaretteHigh</defName>
    <label>Surrounded by cigarette smoke</label>
    <labelNoun>a cigarette smoke</labelNoun>
    <description>For some reason having lungs filled with smoke is quite relaxing</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1.0</severityPerDay>
      </li>
    </comps>
      <stages>
            <li>
          <capMods>
            <li>
              <capacity>Breathing</capacity>
              <offset>-0.1</offset>
            </li>
          </capMods>
        </li>
      </stages>
  </HediffDef>
  
  <ThoughtDef>
    <defName>CigaretteHigh</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>CigaretteHigh</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>surounded by cigarette smoke</label>
        <description>No, really, I enjoy having my lungs filled with smoke</description>
        <baseMoodEffect>3</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  <ThingDef ParentName="DrugBase">
    <defName>FCP_CoyoteChew</defName>
    <label>Coyote Tobacco Chew</label>
    <description>Nicotiana attenuata, colloquially known as coyote tobacco. Chewing it makes it easier to not fall asleep.</description>
    <descriptionHyperlinks>
      <HediffDef>CoyoteChewHigh</HediffDef>
      <HediffDef>TobaccoTolerance</HediffDef>
      <HediffDef>TobaccoAddiction</HediffDef>
      <HediffDef>Carcinoma</HediffDef>
      <HediffDef>Asthma</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Drug/cheems</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>50</WorkToMake>
      <MarketValue>2</MarketValue>
      <Mass>0.05</Mass>
      <DeteriorationRate>6</DeteriorationRate>
      <Flammability>1.3</Flammability>
    </statBases>
    <techLevel>Neolithic</techLevel>
    <ingestible>
      <foodType>Plant, Processed</foodType>
      <joyKind>Chemical</joyKind>
      <joy>0.10</joy>
      <baseIngestTicks>360</baseIngestTicks>
      <nurseable>false</nurseable>
      <drugCategory>Social</drugCategory>
      <ingestSound>Meal_Eat</ingestSound>
      <ingestEffectEat>EatVegetarian</ingestEffectEat>
      <ingestHoldUsesTable>false</ingestHoldUsesTable>
      <ingestCommandString>Chew {0}</ingestCommandString>
      <ingestReportString>Chewing {0}.</ingestReportString>
      <ingestReportStringEat>Consuming {0}.</ingestReportStringEat>
      <useEatingSpeedStat>true</useEatingSpeedStat>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>CoyoteChewHigh</hediffDef>
          <severity>0.5</severity>
          <toleranceChemical>Tobacco</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_OffsetNeed">
          <need>Rest</need>
          <offset>-0.1</offset>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>TobaccoTolerance</hediffDef>
          <severity>0.030</severity>
          <divideByBodySize>true</divideByBodySize>
        </li>
      </outcomeDoers>
    </ingestible>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>Tobacco</chemical>
        <addictiveness>0.050</addictiveness>
        <minToleranceToAddict>0.15</minToleranceToAddict>
        <existingAddictionSeverityOffset>0.06</existingAddictionSeverityOffset>
        <needLevelOffset>1</needLevelOffset>
        <listOrder>20</listOrder>
      </li>
    </comps>
  </ThingDef>
  
 <HediffDef>
    <defName>CoyoteChewHigh</defName>
    <label>mouthful of tobacco</label>
    <labelNoun>mouthful of tobacco</labelNoun>
    <description>Nicotine in the bloodstream generates a feeling of awakeness and full stomach.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1.0</severityPerDay>
      </li>
    </comps>
      <stages>
        <li>
          <hungerRateFactorOffset>-0.1</hungerRateFactorOffset>
          <capMods>
            <li>
              <capacity>Consciousness</capacity>
              <offset>-0.1</offset>
            </li>
          </capMods>
        </li>
      </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>CoyoteChewHigh</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>CoyoteChewHigh</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>chew some tobacco</label>
        <description>My gums hurt, but that's O.K.</description>
        <baseMoodEffect>3</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  <!-- Smokeleaf addiction -->

  <ChemicalDef>
    <defName>Tobacco</defName>
    <label>Tobacco</label>
    <addictionHediff>TobaccoAddiction</addictionHediff>
    <toleranceHediff>TobaccoTolerance</toleranceHediff>
    <onGeneratedAddictedToleranceChance>0.8</onGeneratedAddictedToleranceChance>
  </ChemicalDef>

  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_Tobacco</defName>
    <needClass>Need_Chemical</needClass>
    <label>tobacco</label>
    <description>Because of a tobacco dependence, this person needs to regularly consume tobacco products to avoid withdrawal symptoms.</description>
    <listPriority>25</listPriority>
  </NeedDef>
  
  <HediffDef ParentName="DrugToleranceBase">
    <defName>TobaccoTolerance</defName>
    <label>tobacco tolerance</label>
    <description>A built-up tolerance to tobacco. The more severe this tolerance is, the more tobacco products it takes to get the same effect.</description>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.015</severityPerDay>
      </li>
      <li Class="HediffCompProperties_DrugEffectFactor">
        <chemical>Tobacco</chemical>
      </li>
    </comps>
    <hediffGivers>
      <li Class="HediffGiver_RandomDrugEffect">
        <hediff>Asthma</hediff>
        <baseMtbDays>180</baseMtbDays>
        <minSeverity>0.50</minSeverity>
        <partsToAffect>
          <li>Lung</li>
        </partsToAffect>
        <countToAffect>2</countToAffect>
      </li>
      <li Class="HediffGiver_RandomDrugEffect">
        <hediff>Carcinoma</hediff>
        <baseMtbDays>180</baseMtbDays>
        <minSeverity>0.40</minSeverity>
        <partsToAffect>
          <li>Lung</li>
        </partsToAffect>
        <countToAffect>1</countToAffect>
      </li>
    </hediffGivers>
  </HediffDef>

  <HediffDef ParentName="AddictionBase">
    <defName>TobaccoAddiction</defName>
    <label>tobacco dependence</label>
    <description>A chemical addiction to tobacco. Long-term use of tobacco products has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
\nWithout regular doses of smokeleaf, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <causesNeed>Chemical_Tobacco</causesNeed>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.015</severityPerDay>
      </li>
    </comps>
    <stages>
      <li>
      </li>
      <li>
        <label>withdrawal</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.10</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.05</offset>
          </li>
        </capMods>
        <mentalStateGivers>
          <li>
            <mentalState>Binging_Food</mentalState>
            <mtbDays>45</mtbDays>
          </li>
          <li>
            <mentalState>Binging_DrugMajor</mentalState>
            <mtbDays>70</mtbDays>
          </li>
        </mentalStateGivers>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>TobaccoWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>TobaccoAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>tobacco withdrawal</label>
        <description>I really wish I could smoke. I feel jittery, and my gut has that anxious sensation all the time.</description>
        <baseMoodEffect>-10</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

</Defs>